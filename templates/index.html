<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0EWWS1ZZ18"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-0EWWS1ZZ18');
    </script>

    <title>RecipAI - レシピ検索</title>
</head>
<body>
    <div class="container">
        <h1>RecipAI 🍽️</h1>
        <p>食材を入力してレシピを検索！</p>
        
        <input type="text" id="ingredients" placeholder="例: 鶏肉, キャベツ, にんじん">
        
        <div class="select-box">
            <label for="flavor">味付け:</label>
            <div class="multiselect" onclick="toggleDropdown()">
                <div id="selected-values">標準</div>
                <div class="dropdown-content" id="dropdown">
                    <label><input type="checkbox" value="標準" checked> 標準</label>
                    <label><input type="checkbox" value="甘め"> 甘め</label>
                    <label><input type="checkbox" value="辛め"> 辛め</label>
                    <label><input type="checkbox" value="さっぱり"> さっぱり</label>
                    <label><input type="checkbox" value="こってり"> こってり</label>
                    <label><input type="checkbox" value="薄め"> 薄め</label>
                    <label><input type="checkbox" value="濃いめ"> 濃いめ</label>
                </div>
            </div>
            <input type="hidden" id="flavor-input">
        </div>

        <div class="allergy-list">
            <label>除外したい食材を選択:</label>
            <div class="toggle-container">
                <input type="checkbox" id="allergy-eggs" name="allergy" value="卵">
                <label for="allergy-eggs">🥚 卵</label>
        
                <input type="checkbox" id="allergy-dairy" name="allergy" value="乳製品">
                <label for="allergy-dairy">🥛 乳製品</label>
        
                <input type="checkbox" id="allergy-nuts" name="allergy" value="ナッツ">
                <label for="allergy-nuts">🌰 ナッツ</label>
        
                <input type="checkbox" id="allergy-seafood" name="allergy" value="魚介類">
                <label for="allergy-seafood">🐟 魚介類</label>
        
                <input type="checkbox" id="allergy-gluten" name="allergy" value="グルテン">
                <label for="allergy-gluten">🍞 グルテン</label>
            </div>
        </div>
        
        <div class="calorie-toggle">
            <label>カロリー調整:</label>
            <div class="toggle-container">
                <input type="radio" id="calorie-normal" name="calorie_option" value="標準" checked>
                <label for="calorie-normal">🍽️ 標準</label>
        
                <input type="radio" id="calorie-low" name="calorie_option" value="ヘルシー">
                <label for="calorie-low">🥗 ヘルシー</label>
        
                <input type="radio" id="calorie-high" name="calorie_option" value="高タンパク">
                <label for="calorie-high">💪 高タンパク</label>
        
                <input type="radio" id="calorie-lowcarb" name="calorie_option" value="糖質オフ">
                <label for="calorie-lowcarb">🥩 糖質オフ</label>
            </div>
        </div>

        <div class="cooking-tools">
            <label>使用する調理器具:</label>
            <div class="toggle-container">
                <input type="checkbox" id="tool-microwave" name="cooking_tools" value="電子レンジ">
                <label for="tool-microwave">📡 電子レンジ</label>
        
                <input type="checkbox" id="tool-fryingpan" name="cooking_tools" value="フライパン">
                <label for="tool-fryingpan">🍳 フライパン</label>
        
                <input type="checkbox" id="tool-oven" name="cooking_tools" value="オーブン">
                <label for="tool-oven">🔥 オーブン</label>
        
                <input type="checkbox" id="tool-nopot" name="cooking_tools" value="鍋なし">
                <label for="tool-nopot">🚫 鍋なし</label>
            </div>
        </div>
        

        <div class="cooking-time-toggle">
            <label>調理時間:</label>
            <div class="toggle-container">
                <input type="radio" id="time-fast" name="cooking_time" value="時短">
                <label for="time-fast">⏳ 時短</label>
        
                <input type="radio" id="time-normal" name="cooking_time" value="標準" checked>
                <label for="time-normal">🍳 標準</label>
        
                <input type="radio" id="time-slow" name="cooking_time" value="じっくり">
                <label for="time-slow">🔥 じっくり</label>
            </div>

            <div class="stepper-container">
                <label for="servings">人数:</label>
                <div class="stepper">
                    <button type="button" onclick="changeServings(-1)">−</button>
                    <input type="text" id="servings" value="3" readonly>
                    <button type="button" onclick="changeServings(1)">＋</button>
                </div>
            </div>
    
        </div>
        

        <button onclick="fetchRecipe()">レシピを検索</button>

        <div id="recipe-result" class="recipe-box" style="margin-top: 20px;"></div>
        <div class="substitutes-button-container">
            <button id="suggest-substitutes" onclick="fetchSubstitutes()">
                代替品を提案
            </button>
        </div>
        <div id="substitutes-result" class="substitutes-box" style="margin-top: 20px;"></div>
    </div>

    <footer style="width: 100%; margin-top: 50px; padding: 10px; text-align: center; font-size: 12px; color: #666; background: #f8f8f8; border-top: 1px solid #ddd; position: relative; clear: both;">
        <div class="footer-container" style="display: flex; justify-content: center; align-items: center; gap: 20px; font-size: 12px; color: #666; margin-top: 10px;">
            <a href="/privacy" class="policy-link" style="color: #666; text-decoration: none;">プライバシーポリシー</a>
            <span>|</span>
            <p style="margin: 0;">※ 当サイトはAmazonアソシエイト、楽天アフィリエイトを利用しています。</p>
        </div>
    </footer>
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>

</body>
</html>
